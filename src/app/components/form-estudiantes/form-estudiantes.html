<!-- component -->
<section class="lg:h-screen overflow-y-auto relative px-4 lg:px-0 bg-gradient-to-tl from-[#009DD5] to-[#5AB24B]">
    <div class=" flex items-start justify-start space-x-2">
        <img src="/assets/img/Logo_negativo.png" class="h-34 lg:h-28" alt="">
    </div>
    <div class="flex flex-col items-center justify-center">

        <div class="bg-white rounded z-50 w-full mt-0 lg:mt-2 xl:mt-2 lg:full xl:w-5/6 px-4 shadow-lg">
            <mat-stepper linear #stepper [orientation]="(stepperOrientation | async)!">
                <form [formGroup]="estudiantesForm" class="flex flex-col min-w-full space-y-8 mt-0 relative">
                    <mat-step label="DATOS PERSONALES">
                        <div class="grid gap-8 lg:grid-cols-2 mt-2 lg:mt-2 text-lg lg:text-sm uppercase">
                            <div class="h-10 w-full min-w-[200px]">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Estado Civil
                                    <span class="text-red-500">*</span></label>
                                <ng-select formControlName="Id_estado_civil" placeholder="Seleccione"
                                    [items]="listestadocivil()" appendTo="html" bindLabel="Nombre" bindValue="Id">
                                </ng-select>
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-0">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Tipo de Sangre
                                    <span class="text-red-500">*</span></label>
                                <ng-select formControlName="Id_tipo_sangre" placeholder="Seleccione"
                                    [items]="tiposangre()" appendTo="html" bindLabel="Nombre" bindValue="Id">
                                </ng-select>
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Peso en libras
                                    <span class="text-red-500">*</span></label>
                                <input (input)="formatearPeso($event)" formControlName="Peso_libras" autocomplete="off"
                                    class="h-full w-full rounded-[4px] bg-transparent placeholder:uppercase px-3 py-2.5 focus:bg-gray-100 border border-black focus:outline-none focus:border-[#009DD5]"
                                    type="" placeholder="Peso libras">
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Altura en centímetros
                                    <span class="text-red-500">*</span></label>
                                <input (input)="formatearAltura($event)" formControlName="Altura_cm" autocomplete="off"
                                    class="h-full w-full rounded-[4px] bg-transparent placeholder:uppercase px-3 py-2.5 focus:bg-gray-100 border border-black focus:outline-none focus:border-[#009DD5]"
                                    type="" placeholder="Altura en centímetros">
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Código Mined</label>
                                <input formControlName="Codigo_MINED" autocomplete="off"
                                    class="h-full w-full rounded-[4px] bg-transparent placeholder:uppercase px-3 py-2.5 focus:bg-gray-100 border border-black focus:outline-none focus:border-[#009DD5]"
                                    type="" placeholder="Código Mined">
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Etnia
                                    <span class="text-red-500">*</span></label>
                                <ng-select formControlName="Id_etnia" placeholder="Seleccione" [items]="listetnias()"
                                    appendTo="html" bindLabel="Nombre" bindValue="Id">
                                </ng-select>
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Discapacidad
                                    <span class="text-red-500">*</span></label>
                                <ng-select formControlName="Id_discapacidad" placeholder="Seleccione"
                                    [items]="listDiscapacidad()" appendTo="html" bindLabel="Nombre" bindValue="Id">
                                </ng-select>
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Deficiencia
                                    <span class="text-red-500">*</span></label>
                                <ng-select formControlName="Id_deficiencia" placeholder="Seleccione"
                                    [items]="listDeficiencia()" appendTo="html" bindLabel="Nombre" bindValue="Id">
                                </ng-select>
                            </div>
                            <div class=" w-full min-w-[200px] mt-4 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    ¿Está embarazada?
                                    <span class="text-red-500">*</span></label>
                                <label for="toggle-embarazo" class="flex items-center cursor-pointer">
                                    <span class="mr-3 text-gray-900 text-sm font-medium">No</span>
                                    <mat-slide-toggle formControlName="Embarazo"></mat-slide-toggle>
                                    <span class="ml-3 text-gray-900 text-sm font-medium">Si</span>
                                </label>

                                <div class=" w-full min-w-[200px] mt-2 lg:mt-2 mb-0"
                                    *ngIf="estudiantesForm.get('Embarazo')?.value">
                                    <label class="block tracking-wide text-black font-bold mb-2">
                                        Meses de embarazo
                                        <span class="text-red-500">*</span>
                                    </label>
                                    <input formControlName="Meses_embarazo" autocomplete="off" type="number" min="1"
                                        max="12"
                                        class="h-full w-full rounded-[4px] bg-transparent placeholder:uppercase px-3 py-2.5 focus:bg-gray-100 border border-black focus:outline-none focus:border-[#009DD5]"
                                        placeholder="Meses de embarazo" />
                                </div>
                            </div>
                            <div class=" w-full min-w-[200px] mt-0 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    ¿Tiene Hijos?
                                    <span class="text-red-500">*</span>
                                </label>
                                <label for="toggle-hijos" class="flex items-center cursor-pointer">
                                    <span class="mr-3 text-gray-900 text-sm font-medium">No</span>
                                    <mat-slide-toggle formControlName="Tiene_hijos" id="toggle-hijos"
                                        color="primary"></mat-slide-toggle>
                                    <span class="ml-3 text-gray-900 text-sm font-medium">Sí</span>
                                </label>

                                <div class=" w-full min-w-[200px] mt-2 lg:mt-2"
                                    *ngIf="estudiantesForm.get('Tiene_hijos')?.value">
                                    <label class="block tracking-wide text-black font-bold mb-2">
                                        N.° de hijos
                                        <span class="text-red-500">*</span>
                                    </label>
                                    <input formControlName="Numero_hijos" autocomplete="off" type="number" min="1"
                                        max="12"
                                        class="h-full w-full rounded-[4px] bg-transparent placeholder:uppercase px-3 py-2.5 focus:bg-gray-100 border border-black focus:outline-none focus:border-[#009DD5]"
                                        placeholder="N.° de hijos" />
                                </div>
                            </div>
                            <div class=" w-full min-w-[200px] mt-0 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    ¿Domina Idiomas?
                                    <span class="text-red-500">*</span></label>
                                <label for="toggle-embarazo" class="flex items-center cursor-pointer">
                                    <span class="mr-3 text-gray-900 text-sm font-medium">No</span>
                                    <mat-slide-toggle formControlName="Dominio_idioma"></mat-slide-toggle>
                                    <span class="ml-3 text-gray-900 text-sm font-medium">Si</span>
                                </label>
                                <div class="w-full mt-10">
                                    <!-- Sección para agregar idiomas (solo visible si Dominio_idioma es true) -->
                                    <div *ngIf="estudiantesForm.get('Dominio_idioma')?.value"
                                        class="rounded-lg border bg-white shadow-sm mb-10">
                                        <div class="border-b px-6 py-4">
                                            <div class="flex items-center gap-2 text-lg font-semibold">
                                                <i class="fa-solid fa-globe h-5 w-5"></i>
                                                Agregar Idioma
                                            </div>
                                        </div>
                                        <div class="p-6">
                                            <div class="grid gap-6 md:grid-cols-3">
                                                <!-- Idioma -->
                                                <div class="space-x-0">
                                                    <label class="block tracking-wide text-black font-bold mb-2">
                                                        Idioma
                                                        <span class="text-red-500">*</span>
                                                    </label>
                                                    <ng-select [items]="listIdiomas()" bindLabel="Nombre" bindValue="Id"
                                                        placeholder="Seleccione idioma" class="h-11"
                                                        [(ngModel)]="nuevoIdioma.Id_idioma_lengua"
                                                        [ngModelOptions]="{standalone: true}">
                                                    </ng-select>
                                                </div>

                                                <!-- Nivel Alcanzado -->
                                                <div class="space-x-0">
                                                    <label class="block tracking-wide text-black font-bold mb-2">
                                                        Nivel Alcanzado
                                                        <span class="text-red-500">*</span>
                                                    </label>
                                                    <ng-select [items]="listNivelAlcanzadoIdiomas()" bindLabel="Nombre"
                                                        bindValue="Id" placeholder="Seleccione nivel" class="h-11"
                                                        [(ngModel)]="nuevoIdioma.Id_nivel_alcanzado"
                                                        [ngModelOptions]="{standalone: true}">
                                                    </ng-select>
                                                </div>

                                                <!-- Botón Agregar -->
                                                <div class="space-x-0">
                                                    <label
                                                        class="block tracking-wide text-transparent font-bold mb-2">Acción</label>
                                                    <button (click)="agregarIdioma()"
                                                        [disabled]="!nuevoIdioma.Id_idioma_lengua || !nuevoIdioma.Id_nivel_alcanzado"
                                                        class="w-full cursor-pointer h-11 bg-blue-600 hover:bg-blue-700 text-white rounded-md disabled:opacity-50 transition duration-100 uppercase">
                                                        Agregar Idioma
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Lista de idiomas agregados (solo si hay idiomas y Dominio_idioma es true) -->
                                    <div *ngIf="estudiantesForm.get('Dominio_idioma')?.value && idiomasAgregados.length > 0"
                                        class="rounded-lg border bg-white shadow-sm">
                                        <div class="p-4 border-b flex items-center justify-between">
                                            <div class="flex items-center gap-2 text-lg font-semibold">
                                                <i class="fa-solid fa-globe h-5 w-5"></i>
                                                Idiomas Registrados
                                            </div>
                                            <span class="bg-gray-100 text-gray-800 text-sm px-3 py-1 rounded">
                                                {{ idiomasAgregados.length }} idioma{{ idiomasAgregados.length !== 1 ?
                                                's' : '' }}
                                            </span>
                                        </div>

                                        <div class="p-4 space-y-3">
                                            <div *ngFor="let idioma of idiomasAgregados; let i = index"
                                                class="flex items-center justify-between p-4 bg-gray-50 rounded-lg border hover:bg-gray-100 transition-colors">
                                                <div class="flex items-center gap-4">
                                                    <div
                                                        class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold">
                                                        {{ i + 1 }}
                                                    </div>
                                                    <div>
                                                        <p class="font-semibold text-gray-900 text-lg">
                                                            {{ obtenerNombreIdioma(idioma.Id_idioma_lengua) }}
                                                        </p>
                                                        <p class="text-sm text-gray-600 flex items-center gap-2">
                                                            <i class="fa-solid fa-graduation-cap h-3 w-3"></i>
                                                            {{ obtenerNivelIdioma(idioma.Id_nivel_alcanzado) }}
                                                        </p>
                                                    </div>
                                                </div>
                                                <button (click)="eliminarIdioma(i)"
                                                    class="text-red-500 hover:text-red-700 hover:bg-red-50 p-2 rounded-full">
                                                    <i class="fa-solid fa-trash-can h-4 w-4"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Estado vacío (solo si Dominio_idioma es true y no hay idiomas) -->
                                    <div *ngIf="estudiantesForm.get('Dominio_idioma')?.value && idiomasAgregados.length === 0"
                                        class="rounded-lg border border-dashed bg-white shadow-sm">
                                        <div class="flex flex-col items-center justify-center py-12 text-center">
                                            <div
                                                class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4">
                                                <i class="fa-solid fa-globe text-gray-400 text-2xl"></i>
                                            </div>
                                            <h3 class="text-lg font-semibold text-gray-900 mb-2">No hay idiomas
                                                registrados</h3>
                                            <p class="text-gray-600 max-w-sm">Agregue su primer idioma usando el
                                                formulario de arriba</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class=" w-full min-w-[200px] mt-0 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    ¿Domina lenguas?
                                    <span class="text-red-500">*</span></label>
                                <label for="toggle-embarazo" class="flex items-center cursor-pointer">
                                    <span class="mr-3 text-gray-900 text-sm font-medium">No</span>
                                    <mat-slide-toggle formControlName="Dominio_lengua"></mat-slide-toggle>
                                    <span class="ml-3 text-gray-900 text-sm font-medium">Si</span>
                                </label>

                                <div class="w-full mt-10">
                                    <!-- Sección para agregar lenguas (solo visible si Dominio_lengua es true) -->
                                    <div *ngIf="estudiantesForm.get('Dominio_lengua')?.value"
                                        class="rounded-lg border bg-white shadow-sm mb-10">
                                        <div class="border-b px-6 py-4">
                                            <div class="flex items-center gap-2 text-lg font-semibold">
                                                <i class="fa-solid fa-comments h-5 w-5"></i>
                                                Agregar Lenguas
                                            </div>
                                        </div>
                                        <div class="p-6">
                                            <div class="grid gap-6 md:grid-cols-3">
                                                <!-- Lengua Indígena -->
                                                <div class="space-x-0">
                                                    <label class="block tracking-wide text-black font-bold mb-2">
                                                        Dominio de Lenguas
                                                        <span class="text-red-500">*</span>
                                                    </label>
                                                    <ng-select [items]="listLenguas()" bindLabel="Nombre" bindValue="Id"
                                                        placeholder="Seleccione lengua" class="h-11"
                                                        [(ngModel)]="nuevaLengua.Id_idioma_lengua"
                                                        [ngModelOptions]="{standalone: true}">
                                                    </ng-select>
                                                </div>

                                                <!-- Nivel Alcanzado -->
                                                <div class="space-x-0">
                                                    <label class="block tracking-wide text-black font-bold mb-2">
                                                        Nivel Alcanzado
                                                        <span class="text-red-500">*</span>
                                                    </label>
                                                    <ng-select [items]="listNivelAlcanzadoLenguas()" bindLabel="Nombre"
                                                        bindValue="Id" placeholder="Seleccione nivel" class="h-11"
                                                        [(ngModel)]="nuevaLengua.Id_nivel_alcanzado"
                                                        [ngModelOptions]="{standalone: true}">
                                                    </ng-select>
                                                </div>

                                                <!-- Botón Agregar -->
                                                <div class="space-x-0">
                                                    <label
                                                        class="block tracking-wide text-transparent font-bold mb-2">Acción</label>
                                                    <button (click)="agregarLengua()"
                                                        [disabled]="!nuevaLengua.Id_idioma_lengua || !nuevaLengua.Id_nivel_alcanzado"
                                                        class="w-full cursor-pointer h-11 bg-blue-600 hover:bg-blue-700 text-white rounded-md disabled:opacity-50 transition duration-100 uppercase">
                                                        Agregar Lengua
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Lista de lenguas agregadas (solo si hay lenguas y Dominio_lengua es true) -->
                                    <div *ngIf="estudiantesForm.get('Dominio_lengua')?.value && lenguasAgregadas.length > 0"
                                        class="rounded-lg border bg-white shadow-sm">
                                        <div class="p-4 border-b flex items-center justify-between">
                                            <div class="flex items-center gap-2 text-lg font-semibold">
                                                <i class="fa-solid fa-comments h-5 w-5"></i>
                                                Lenguas Registradas
                                            </div>
                                            <span class="bg-gray-100 text-gray-800 text-sm px-3 py-1 rounded">
                                                {{ lenguasAgregadas.length }} lengua{{ lenguasAgregadas.length !== 1 ?
                                                's' : '' }}
                                            </span>
                                        </div>

                                        <div class="p-4 space-y-3">
                                            <div *ngFor="let lengua of lenguasAgregadas; let i = index"
                                                class="flex items-center justify-between p-4 bg-gray-50 rounded-lg border hover:bg-gray-100 transition-colors">
                                                <div class="flex items-center gap-4">
                                                    <div
                                                        class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold">
                                                        {{ i + 1 }}
                                                    </div>
                                                    <div>
                                                        <p class="font-semibold text-gray-900 text-lg">
                                                            {{ obtenerNombreLengua(lengua.Id_idioma_lengua) }}
                                                        </p>
                                                        <p class="text-sm text-gray-600 flex items-center gap-2">
                                                            <i class="fa-solid fa-graduation-cap h-3 w-3"></i>
                                                            {{ obtenerNivelLengua(lengua.Id_nivel_alcanzado) }}
                                                        </p>
                                                    </div>
                                                </div>
                                                <button (click)="eliminarLengua(i)"
                                                    class="text-red-500 hover:text-red-700 hover:bg-red-50 p-2 rounded-full">
                                                    <i class="fa-solid fa-trash-can h-4 w-4"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Estado vacío (solo si Dominio_lengua es true y no hay lenguas) -->
                                    <div *ngIf="estudiantesForm.get('Dominio_lengua')?.value && lenguasAgregadas.length === 0"
                                        class="rounded-lg border border-dashed bg-white shadow-sm">
                                        <div class="flex flex-col items-center justify-center py-12 text-center">
                                            <div
                                                class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4">
                                                <i class="fa-solid fa-comments text-gray-400 text-2xl"></i>
                                            </div>
                                            <h3 class="text-lg font-semibold text-gray-900 mb-2">No hay lenguas
                                                registradas</h3>
                                            <p class="text-gray-600 max-w-sm">Agregue su primera lengua usando el
                                                formulario de arriba</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="flex flex-col mt-12 lg:mt-10">
                            <button
                                class="uppercase cursor-pointer mt-4 w-full bg-[#1da2fc] hover:bg-[#009cd5] text-white py-4 lg:py-2 rounded-md transition duration-100"
                                matStepperNext>Siguiente</button>
                        </div>
                    </mat-step>

                    <mat-step label="ORIGEN Y RESIDENCIAS">
                        <div class="grid gap-8 lg:grid-cols-2 mt-6 lg:mt-2 text-lg lg:text-sm uppercase">
                            <div class="h-10 w-full min-w-[200px]">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Nacionalidad
                                    <span class="text-red-500">*</span></label>
                                <ng-select formControlName="Id_dimension_nacionalidad" placeholder="Seleccione"
                                    [items]="dimensionNacionalidad()" appendTo="html" bindLabel="Nombre" bindValue="Id">
                                </ng-select>
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-0">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    País de origen
                                    <span class="text-red-500">*</span></label>
                                <ng-select formControlName="Id_pais_origen" placeholder="Seleccione"
                                    [items]="listpais()" appendTo="html" bindLabel="Nombre" bindValue="Id">
                                </ng-select>
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Departamento de origen
                                    <span class="text-red-500">*</span></label>
                                <ng-select formControlName="Id_departamento_origen" placeholder="Seleccione"
                                    [items]="listdepartamentos()" (change)="getMunicipiosByDepartamento()"
                                    appendTo="html" bindLabel="Nombre" bindValue="Id">
                                </ng-select>
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Municipio de origen
                                    <span class="text-red-500">*</span></label>
                                <ng-select formControlName="Id_municipio_origen" placeholder="Seleccione"
                                    [items]="listmunicipio()" (change)="getMunicipioByComunidadesOrigen()"
                                    appendTo="html" bindLabel="Nombre" bindValue="Id">
                                </ng-select>
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Comunidad de origen
                                    <span class="text-red-500">*</span></label>
                                <ng-select formControlName="Id_comunidad_origen" placeholder="Seleccione"
                                    [items]="listcomunidadorigen()" appendTo="html" bindLabel="Nombre" bindValue="Id">
                                </ng-select>
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Zona de origen
                                    <span class="text-red-500">*</span></label>
                                <ng-select formControlName="Id_zona_procedencia" placeholder="Seleccione"
                                    [items]="listzona()" appendTo="html" bindLabel="Nombre" bindValue="Id">
                                </ng-select>
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Departamento de residencia
                                    <span class="text-red-500">*</span></label>
                                <ng-select formControlName="Id_departamento_residencia" placeholder="Seleccione"
                                    [items]="listdepartamentosresidencia()"
                                    (change)="getMunicipiosByDepartamentoResidencia()" appendTo="html"
                                    bindLabel="Nombre" bindValue="Id">
                                </ng-select>
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Municipio de residencia
                                    <span class="text-red-500">*</span></label>
                                <ng-select formControlName="Id_municipio_residencia" placeholder="Seleccione"
                                    [items]="listmunicipioresidencia()" (change)="getMunicipioByComunidadesResidencia()"
                                    appendTo="html" bindLabel="Nombre" bindValue="Id">
                                </ng-select>
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Comunidad de residencia
                                    <span class="text-red-500">*</span></label>
                                <ng-select formControlName="Id_comunidad_residencia" placeholder="Seleccione"
                                    [items]="listcomunidadresidencia()" appendTo="html" bindLabel="Nombre"
                                    bindValue="Id">
                                </ng-select>
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Zona de residencia
                                    <span class="text-red-500">*</span></label>
                                <ng-select formControlName="Id_zona_residencia" placeholder="Seleccione"
                                    [items]="listzonaresidencia()" appendTo="html" bindLabel="Nombre" bindValue="Id">
                                </ng-select>
                            </div>

                        </div>
                        <div class="h-10 w-full min-w-[200px] text-lg lg:text-sm mt-14 lg:mt-10">
                            <label class="block uppercase tracking-wide text-black font-bold mb-2">
                                DIRECCIÓN DE RESIDENCIA
                                <span class="text-red-500">*</span></label>
                            <input formControlName="Direccion_residencia" autocomplete="off" type="text"
                                class="h-full w-full rounded-[4px] bg-transparent placeholder:uppercase px-3 py-2.5 focus:bg-gray-100 border border-black focus:outline-none focus:border-[#009DD5]"
                                placeholder="DIRECCIÓN DE RESIDENCIA" />
                        </div>
                        <div class="grid gap-6 lg:grid-cols-2 mt-14">
                            <button
                                class="uppercase cursor-pointer w-full border border-green-500 hover:bg-[#5AB24B] text-green-500 hover:text-white py-4 lg:py-2 rounded-md transition duration-100"
                                matStepperPrevious>Anterior</button>

                            <button
                                class="uppercase cursor-pointer w-full bg-[#1da2fc] hover:bg-[#009cd5] text-white py-4 lg:py-2 rounded-md transition duration-100"
                                matStepperNext>Siguiente</button>
                        </div>
                    </mat-step>

                    <mat-step label="SITUACIÓN LABORAL">
                        <div class="h-10 w-full min-w-[200px] mt-6 lg:mt-6 text-lg lg:text-sm uppercase">
                            <label class="block tracking-wide text-black font-bold mb-2">
                                ¿Trabaja?</label>
                            <label for="toggle-embarazo" class="flex items-center cursor-pointer">
                                <span class="mr-3 text-gray-900 text-sm font-medium">No</span>
                                <mat-slide-toggle formControlName="Trabaja"></mat-slide-toggle>
                                <span class="ml-3 text-gray-900 text-sm font-medium">Si</span>
                            </label>
                        </div>
                        <div class="grid gap-8 lg:grid-cols-2 mt-6 lg:mt-6 text-lg lg:text-sm uppercase">
                            <div class="h-10 w-full min-w-[200px] mt-6 lg:mt-4"
                                *ngIf="estudiantesForm.get('Trabaja')?.value">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Ocupación
                                    <span class="text-red-500">*</span></label>
                                <ng-select formControlName="Id_ocupacion" placeholder="Seleccione"
                                    [items]="listocupacion()" appendTo="html" bindLabel="Nombre" bindValue="Id">
                                </ng-select>
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-6 lg:mt-4"
                                *ngIf="estudiantesForm.get('Trabaja')?.value">
                                <label class="block  tracking-wide text-black font-bold mb-2">
                                    Sector de Ocupación
                                    <span class="text-red-500">*</span></label>
                                <ng-select formControlName="Id_sector_ocupacion" placeholder="Seleccione"
                                    [items]="listsectorocupacion()" appendTo="html" bindLabel="Nombre" bindValue="Id">
                                </ng-select>
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2"
                                *ngIf="estudiantesForm.get('Trabaja')?.value">
                                <label class="block  tracking-wide text-black font-bold mb-2">
                                    Entidad Laboral
                                    <span class="text-red-500">*</span></label>
                                <ng-select formControlName="Id_entidad_laboral" placeholder="Seleccione"
                                    [items]="listentidadlaboral()" appendTo="html" bindLabel="Nombre" bindValue="Id">
                                </ng-select>
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2"
                                *ngIf="estudiantesForm.get('Trabaja')?.value">
                                <label class="block  tracking-wide text-black font-bold mb-2">
                                    N.° de inss</label>
                                <input formControlName="Numero_inss" autocomplete="off"
                                    class="h-full w-full rounded-[4px] bg-transparent placeholder:uppercase px-3 py-2.5 focus:bg-gray-100 border border-black focus:outline-none focus:border-[#009DD5]"
                                    placeholder="N.° de inss" />
                            </div>
                        </div>
                        <div class="grid gap-6 lg:grid-cols-2 mt-14">
                            <button
                                class="uppercase cursor-pointer w-full border border-green-500 hover:bg-[#5AB24B] text-green-500 hover:text-white py-4 lg:py-2 rounded-md transition duration-100"
                                matStepperPrevious>Anterior</button>

                            <button
                                class="uppercase cursor-pointer w-full bg-[#1da2fc] hover:bg-[#009cd5] text-white py-4 lg:py-2 rounded-md transition duration-100"
                                matStepperNext>Siguiente</button>
                        </div>
                    </mat-step>

                    <mat-step label="FORMACIÓN ACADEMICA">
                        <div class="grid gap-8 lg:grid-cols-2 mt-6 lg:mt-6 text-lg lg:text-sm uppercase">
                            <div class="h-10 w-full min-w-[200px]">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Departamento que culminó
                                    <span class="text-red-500">*</span></label>
                                <ng-select formControlName="Id_departamento_culmino" placeholder="Seleccione"
                                    [items]="listdepartamentosculmino()" (change)="getMunicipiosByDepartamentoCulmino()"
                                    appendTo="html" bindLabel="Nombre" bindValue="Id">
                                </ng-select>
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-0">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Municipio que culminó
                                    <span class="text-red-500">*</span></label>
                                <ng-select formControlName="Id_municipio_culmino" placeholder="Seleccione"
                                    [items]="listmunicipioculmino()" (change)="getMunicipiosByCentroSecundaria()"
                                    appendTo="html" bindLabel="Nombre" bindValue="Id">
                                </ng-select>
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Centro de secundaria
                                    <span class="text-red-500">*</span></label>
                                <ng-select formControlName="Id_centro_secundaria" placeholder="Seleccione"
                                    [items]="listcentrosecundario()" appendTo="html" bindLabel="Nombre" bindValue="Id">
                                </ng-select>
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Año bachillerato
                                    <span class="text-red-500">*</span></label>
                                <input (input)="formatearAnioBachillerato($event)" formControlName="Anio_bachillerato" autocomplete="off"
                                    class="h-full w-full rounded-[4px] bg-transparent placeholder:uppercase px-3 py-2.5 focus:bg-gray-100 border border-black focus:outline-none focus:border-[#009DD5]"
                                    placeholder="Año bachillerato" />
                            </div>
                            <div class="w-full min-w-[200px] mt-6 lg:mt-6 text-lg lg:text-sm uppercase">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    ¿Tiene carrera técnica?</label>
                                <label for="toggle-embarazo" class="flex items-center cursor-pointer">
                                    <span class="mr-3 text-gray-900 text-sm font-medium">No</span>
                                    <mat-slide-toggle formControlName="tiene_tecnica"></mat-slide-toggle>
                                    <span class="ml-3 text-gray-900 text-sm font-medium">Si</span>
                                </label>
                                <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2"
                                    *ngIf="estudiantesForm.get('tiene_tecnica')?.value">
                                    <label class="block tracking-wide text-black font-bold mb-2">
                                        Carrera Técnica
                                        <span class="text-red-500">*</span></label>
                                    <ng-select formControlName="Carrera_tecnica" placeholder="Seleccione" [items]=""
                                        appendTo="html" bindLabel="Nombre" bindValue="Id">
                                    </ng-select>
                                </div>
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Año que ingresó a la universidad
                                    <span class="text-red-500">*</span></label>
                                <ng-select formControlName="Anio_ingreso_carrera" placeholder="Seleccione" [items]="anioIngreso"
                                    appendTo="html" bindLabel="Nombre" bindValue="Id">
                                </ng-select>
                            </div>
                        </div>
                        <div class="grid gap-6 lg:grid-cols-2 mt-14">
                            <button
                                class="uppercase cursor-pointer w-full border border-green-500 hover:bg-[#5AB24B] text-green-500 hover:text-white py-4 lg:py-2 rounded-md transition duration-100"
                                matStepperPrevious>Anterior</button>
                            <button
                                class="uppercase cursor-pointer w-full bg-[#1da2fc] hover:bg-[#009cd5] text-white py-4 lg:py-2 rounded-md transition duration-100"
                                matStepperNext>Siguiente</button>
                        </div>
                    </mat-step>
                    <mat-step label="DISPOSITIVOS Y CONECTIVIDAD">
                        <div class="grid gap-8 lg:grid-cols-2 mt-2 lg:mt-2 text-lg lg:text-sm uppercase">
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-0">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Dipositivo
                                    <span class="text-red-500">*</span></label>
                                <ng-select [multiple]="true" [closeOnSelect]="false" [hideSelected]="true"
                                    placeholder="Seleccione" [items]="listdispositivos()" appendTo="html"
                                    bindLabel="Nombre" bindValue="Id">
                                </ng-select>
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-0">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    tipo DE CONEXIÓN A INTERNET
                                    <span class="text-red-500">*</span></label>
                                <ng-select formControlName="Id_tipo_conexion" placeholder="Seleccione"
                                    [items]="listTipoConexion()" appendTo="html" bindLabel="Nombre" bindValue="Id">
                                </ng-select>
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2 mb-6">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Proveedor de internet
                                    <span class="text-red-500">*</span></label>
                                <ng-select formControlName="Id_empesa_internet" placeholder="Seleccione"
                                    [items]="listproveedorInternet()" appendTo="html" bindLabel="Nombre" bindValue="Id">
                                </ng-select>
                            </div>
                        </div>

                        <div class="w-full mt-10">

                            <!-- Formulario para agregar teléfono -->
                            <div class="rounded-lg border bg-white shadow-sm mb-10">
                                <div class="border-b px-6 py-4">
                                    <div class="flex items-center gap-2 text-lg font-semibold">
                                        <i class="fa-solid fa-phone h-5 w-5"></i>
                                        Agregar Número Telefónico
                                    </div>
                                </div>
                                <div class="p-6">
                                    <div class="grid gap-6 md:grid-cols-3">

                                        <!-- Compañía Telefónica -->
                                        <div class="space-x-0">
                                            <label class="block tracking-wide text-black font-bold mb-2">
                                                Compañía Telefónica
                                                <span class="text-red-500">*</span></label>
                                            <ng-select [items]="listCompaniaTelef()" bindLabel="Nombre" bindValue="Id"
                                                [(ngModel)]="nuevoTelefono.Id_compania_telefonica"
                                                formControlName="Id_compania_telefonica"
                                                placeholder="Seleccione compañía" class="h-11">
                                            </ng-select>
                                        </div>

                                        <!-- Número Celular -->
                                        <div class="space-x-0">
                                            <label class="block tracking-wide text-black font-bold mb-2">
                                                Número Celular
                                                <span class="text-red-500">*</span></label>
                                            <input id="phone" type="tel" maxlength="12" autocomplete="off"
                                                [(ngModel)]="nuevoTelefono.Numero_telefono"
                                                formControlName="Numero_telefono" (input)="formatearTelefono($event)"
                                                placeholder="0000-0000"
                                                class="h-11 w-full rounded-md border border-black px-3 py-2 placeholder:uppercase focus:outline-none focus:bg-gray-100 focus:border-[#009DD5]" />
                                        </div>

                                        <!-- Botón Agregar -->
                                        <div class="space-x-0">
                                            <label
                                                class="block tracking-wide text-transparent font-bold mb-2">Acción</label>
                                            <button (click)="agregarTelefono()"
                                                [disabled]="!nuevoTelefono.Id_compania_telefonica || !nuevoTelefono.Numero_telefono"
                                                class="w-full cursor-pointer h-11 bg-blue-600 hover:bg-blue-700 text-white rounded-md disabled:opacity-50 transition duration-100 uppercase">
                                                Agregar Número
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Lista de teléfonos agregados -->
                            <div *ngIf="telefonosAgregados.length > 0" class="rounded-lg border bg-white shadow-sm">
                                <div class="p-4 border-b flex items-center justify-between">
                                    <div class="flex items-center gap-2 text-lg font-semibold">
                                        <i class="fa-solid fa-building h-5 w-5"></i>
                                        Números Registrados
                                    </div>
                                    <span class="bg-gray-100 text-gray-800 text-sm px-3 py-1 rounded">
                                        {{ telefonosAgregados.length }} número{{ telefonosAgregados.length !== 1 ? 's' :
                                        '' }}
                                    </span>
                                </div>

                                <div class="p-4 space-y-3">
                                    <div *ngFor="let tel of telefonosAgregados; let i = index"
                                        class="flex items-center justify-between p-4 bg-gray-50 rounded-lg border hover:bg-gray-100 transition-colors">
                                        <div class="flex items-center gap-4">
                                            <div
                                                class="w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold">
                                                {{ i + 1 }}
                                            </div>
                                            <div>
                                                <p class="font-semibold text-gray-900 text-lg">{{ tel.Numero_telefono }}
                                                </p>
                                                <p class="text-sm text-gray-600 flex items-center gap-2">
                                                    <i class="fa-solid fa-building h-3 w-3"></i>
                                                    {{ obtenerNombreCompania(tel.Id_compania_telefonica) }}
                                                </p>
                                            </div>
                                        </div>
                                        <button (click)="eliminarTelefono(i)"
                                            class="text-red-500 hover:text-red-700 hover:bg-red-50 p-2 rounded-full">
                                            <i class="fa-solid fa-trash-can h-4 w-4"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Estado vacío -->
                            <div *ngIf="telefonosAgregados.length === 0"
                                class="rounded-lg border border-dashed bg-white shadow-sm">
                                <div class="flex flex-col items-center justify-center py-12 text-center">
                                    <div
                                        class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4">
                                        <i class="fa-solid fa-phone text-gray-400 text-2xl"></i>
                                    </div>
                                    <h3 class="text-lg font-semibold text-gray-900 mb-2">No hay teléfonos registrados
                                    </h3>
                                    <p class="text-gray-600 max-w-sm">Agregue su primer número usando el formulario de
                                        arriba</p>
                                </div>
                            </div>
                        </div>


                        <div class="grid gap-6 lg:grid-cols-2 mt-14">
                            <button
                                class="uppercase cursor-pointer w-full border border-green-500 hover:bg-[#5AB24B] text-green-500 hover:text-white py-4 lg:py-2 rounded-md transition duration-100"
                                matStepperPrevious>Anterior</button>

                            <button
                                class="uppercase cursor-pointer w-full bg-[#1da2fc] hover:bg-[#009cd5] text-white py-4 lg:py-2 rounded-md transition duration-100"
                                matStepperNext>Siguiente</button>
                        </div>
                    </mat-step>

                    <mat-step label="DATOS FAMILIAR">
                        <div class="grid gap-8 lg:grid-cols-2 mt-2 lg:mt-2 text-lg lg:text-sm uppercase">
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Tipo de parentesco
                                    <span class="text-red-500">*</span></label>
                                <ng-select formControlName="Id_tipo_parentesco" placeholder="Seleccione" [items]="listTipoParentesco()" appendTo="html" 
                                bindLabel="Nombre" bindValue="Id">
                                </ng-select>
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Nombres del Tutor
                                    <span class="text-red-500">*</span></label>
                                <input autocomplete="off" type="text"
                                    class="h-full w-full rounded-[4px] bg-transparent placeholder:uppercase px-3 py-2.5 focus:bg-gray-100 border border-black focus:outline-none focus:border-[#009DD5]"
                                    placeholder="Nombres del Tutor" />
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Primer apellido del Tutor
                                    <span class="text-red-500">*</span></label>
                                <input autocomplete="off" type="text"
                                    class="h-full w-full rounded-[4px] bg-transparent placeholder:uppercase px-3 py-2.5 focus:bg-gray-100 border border-black focus:outline-none focus:border-[#009DD5]"
                                    placeholder="Primer apellido del Tutor" />
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Segundo apellido del Tutor
                                    <span class="text-red-500">*</span></label>
                                <input autocomplete="off" type="text"
                                    class="h-full w-full rounded-[4px] bg-transparent placeholder:uppercase px-3 py-2.5 focus:bg-gray-100 border border-black focus:outline-none focus:border-[#009DD5]"
                                    placeholder="Segundo apellido del Tutor" />
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Fecha de Nacimiento del Tutor
                                    <span class="text-red-500">*</span></label>
                                <div class="relative h-10 w-full">
                                    <div class="relative h-10 w-full">
                                        <div class="absolute top-0 right-1">
                                            <mat-datepicker-toggle matIconSuffix
                                                [for]="picker1"></mat-datepicker-toggle>
                                        </div>
                                        <input matInput [matDatepicker]="picker1"
                                            class="h-full w-full rounded-[4px] bg-transparent placeholder:uppercase px-3 py-2.5 focus:bg-gray-100 border border-black focus:outline-none focus:border-[#009DD5]"
                                            placeholder="D/M/A" autocomplete="off">
                                    </div>
                                    <mat-datepicker #picker1></mat-datepicker>
                                </div>
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Depende económicamente </label>
                                <label for="toggle-embarazo" class="flex items-center cursor-pointer">
                                    <span class="mr-3 text-gray-900 text-sm font-medium">No</span>
                                    <mat-slide-toggle formControlName="Trabaja"></mat-slide-toggle>
                                    <span class="ml-3 text-gray-900 text-sm font-medium">Si</span>
                                </label>
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Centro de trabajo del Tutor
                                    <span class="text-red-500">*</span></label>
                                <input autocomplete="off" type="text"
                                    class="h-full w-full rounded-[4px] bg-transparent placeholder:uppercase px-3 py-2.5 focus:bg-gray-100 border border-black focus:outline-none focus:border-[#009DD5]"
                                    placeholder="Centro de trabajo del Tutor" />
                            </div>
                            <div class="h-10 w-full min-w-[200px] mt-4 lg:mt-2">
                                <label class="block tracking-wide text-black font-bold mb-2">
                                    Ingresos mensual
                                    <span class="text-red-500">*</span></label>
                                <input autocomplete="off" type="number" min="1" max="12"
                                    class="h-full w-full rounded-[4px] bg-transparent placeholder:uppercase px-3 py-2.5 focus:bg-gray-100 border border-black focus:outline-none focus:border-[#009DD5]"
                                    placeholder="Numero celular" />
                            </div>
                        </div>
                        <div class="grid gap-6 lg:grid-cols-2 mt-14">
                            <button
                                class="uppercase cursor-pointer w-full border border-green-500 hover:bg-[#5AB24B] text-green-500 hover:text-white py-4 lg:py-2 rounded-md transition duration-100"
                                matStepperPrevious>Anterior</button>

                            <button
                            (click)="buttonSweet()"
                                class="uppercase cursor-pointer w-full bg-[#1da2fc] hover:bg-[#009cd5] text-white py-4 lg:py-2 rounded-md transition duration-100"
                                matStepperNext>Guardar</button>
                        </div>
                    </mat-step>
                </form>
            </mat-stepper>
        </div>
    </div>
    <footer class="absolute bottom-4 hidden md:block w-full z-9">
        <img src="/assets/img/sol-negativo.png" alt="" class="w-full object-cover">
    </footer>

</section>